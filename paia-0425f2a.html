<!DOCTYPE html>
<html lang="de_DE">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jakob Voß" />
  <meta name="date" content="2014-07-11" />
  <title>Patrons Account Information API (PAIA)</title>
  <link rel="alternate" type="application/rdf+xml" href="paia.owl" />
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
/*<![CDATA[*/
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
/*]]>*/
  </style>
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
</head>
<body>
<a href="http://github.com/gbv/paia/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>
<h1 class="title">Patrons Account Information API (PAIA)</h1>
<h3 class="author">Jakob Voß</h3>
<h4 class="date">2014-07-11 (version 1.0.3)</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#synopsis"><span class="toc-section-number">1.1</span> Synopsis</a></li>
<li><a href="#status-of-this-document"><span class="toc-section-number">1.2</span> Status of this document</a></li>
<li><a href="#how-to-contribute"><span class="toc-section-number">1.3</span> How to contribute</a></li>
<li><a href="#conformance-requirements"><span class="toc-section-number">1.4</span> Conformance requirements</a></li>
</ul></li>
<li><a href="#general"><span class="toc-section-number">2</span> General</a><ul>
<li><a href="#request-and-response-format"><span class="toc-section-number">2.1</span> Request and response format</a></li>
<li><a href="#special-request-parameters"><span class="toc-section-number">2.2</span> Special request parameters</a></li>
<li><a href="#access-tokens-and-scopes"><span class="toc-section-number">2.3</span> Access tokens and scopes</a></li>
<li><a href="#error-response"><span class="toc-section-number">2.4</span> Error response</a></li>
<li><a href="#simple-data-types"><span class="toc-section-number">2.5</span> Simple data types</a></li>
<li><a href="#document-data-type"><span class="toc-section-number">2.6</span> Document data type</a></li>
</ul></li>
<li><a href="#paia-core"><span class="toc-section-number">3</span> PAIA core</a><ul>
<li><a href="#patron"><span class="toc-section-number">3.1</span> patron</a></li>
<li><a href="#items"><span class="toc-section-number">3.2</span> items</a></li>
<li><a href="#request"><span class="toc-section-number">3.3</span> request</a></li>
<li><a href="#renew"><span class="toc-section-number">3.4</span> renew</a></li>
<li><a href="#cancel"><span class="toc-section-number">3.5</span> cancel</a></li>
<li><a href="#fees"><span class="toc-section-number">3.6</span> fees</a></li>
</ul></li>
<li><a href="#paia-auth"><span class="toc-section-number">4</span> PAIA auth</a><ul>
<li><a href="#login"><span class="toc-section-number">4.1</span> login</a></li>
<li><a href="#logout"><span class="toc-section-number">4.2</span> logout</a></li>
<li><a href="#change"><span class="toc-section-number">4.3</span> change</a></li>
</ul></li>
<li><a href="#paia-ontology"><span class="toc-section-number">5</span> PAIA Ontology</a><ul>
<li><a href="#namespaces-and-ontology"><span class="toc-section-number">5.1</span> Namespaces and Ontology</a></li>
<li><a href="#patrons-in-rdf"><span class="toc-section-number">5.2</span> Patrons in RDF</a></li>
<li><a href="#items-in-rdf"><span class="toc-section-number">5.3</span> Items in RDF</a></li>
<li><a href="#fees-in-rdf"><span class="toc-section-number">5.4</span> Fees in RDF</a></li>
</ul></li>
<li><a href="#glossary"><span class="toc-section-number">6</span> Glossary</a></li>
<li><a href="#security-considerations"><span class="toc-section-number">7</span> Security Considerations</a></li>
<li><a href="#informative-parts"><span class="toc-section-number">8</span> Informative parts</a><ul>
<li><a href="#transitions-of-service-states"><span class="toc-section-number">8.1</span> Transitions of service states</a></li>
<li><a href="#digital-documents"><span class="toc-section-number">8.2</span> Digital documents</a></li>
<li><a href="#paia-core-extensions-to-non-document-services"><span class="toc-section-number">8.3</span> PAIA core extensions to non-document services</a></li>
</ul></li>
<li><a href="#references"><span class="toc-section-number">9</span> References</a><ul>
<li><a href="#normative-references"><span class="toc-section-number">9.1</span> Normative References</a></li>
<li><a href="#informative-references"><span class="toc-section-number">9.2</span> Informative References</a></li>
<li><a href="#revision-history"><span class="toc-section-number">9.3</span> Revision history</a></li>
</ul></li>
</ul>
</nav>
<section id="introduction" class="level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>The <strong>Patrons Account Information API (PAIA)</strong> is a HTTP based programming interface to access library patron information, such as loans, reservations, and fees. Its primary goal is to provide patron access for discovery interfaces and other third-party applications to integrated library system, as easy and open as possible.</p>
<section id="synopsis" class="level2">
<h2><span class="header-section-number">1.1</span> Synopsis</h2>
<p>PAIA defines six methods in <a href="#paia-core">PAIA core</a> and three methods in <a href="#paia-auth">PAIA auth</a>. Each method is defined with an HTTP verb and an entity that the method acts on:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><a href="#paia-core">PAIA core</a></th>
<th style="text-align: center;"><a href="#paia-auth">PAIA auth</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GET <a href="#patron">patron</a>: general patron information</td>
<td>POST <a href="#login">login</a>: get access token</td>
</tr>
<tr class="even">
<td>GET <a href="#items">items</a>: current loans, reservations, …</td>
<td>POST <a href="#logout">logout</a>: invalidate access token</td>
</tr>
<tr class="odd">
<td>POST <a href="#request">request</a>: new reservation, delivery, …</td>
<td>POST <a href="#change">change</a>: modify credentials</td>
</tr>
<tr class="even">
<td>POST <a href="#renew">renew</a>: existing loans, reservations, …</td>
<td></td>
</tr>
<tr class="odd">
<td>POST <a href="#cancel">cancel</a>: requests, reservations, …</td>
<td></td>
</tr>
<tr class="even">
<td>GET <a href="#fees">fees</a>: paid and open charges</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="status-of-this-document" class="level2">
<h2><span class="header-section-number">1.2</span> Status of this document</h2>
<p>This specification has been created collaboratively based on use cases and taking into account existing related standards and products of integrated library systems (ILS), such as NISO Circulation Interchange Protocol (NCIP), SIP2, [X]SLNP,<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> DLF-ILS recommendations, and VuFind ILS.</p>
<p>Updates and sources can be found in a public git repository at <a href="http://github.com/gbv/paia">http://github.com/gbv/paia</a>. The master file <a href="https://github.com/gbv/paia/blob/master/paia.md">paia.md</a> is written in <a href="http://johnmacfarlane.net/pandoc/demo/example9/pandocs-markdown.html">Pandoc’s Markdown</a>. HTML version of the specification and PAIA ontology <a href="paia.ttl">in RDF/Turtle</a> and <a href="paia.owl">in RDF/XML</a> are generated from the master file with <a href="https://github.com/jakobib/makespec">makespec</a>. The text of the specification can be distributed freely under the terms of CC-BY-SA.</p>
</section>
<section id="how-to-contribute" class="level2">
<h2><span class="header-section-number">1.3</span> How to contribute</h2>
<ul>
<li>Implement a PAIA server for your library system - either directly to the core, or as wrapper above existing protocols (SIP2, SLNP, NCIP), or based on screen-scraping.</li>
<li>Urge libraries to implement a public PAIA server for their patrons.</li>
<li>Implement a PAIA client that makes use of patron account information - for instance a mobile app or a web application.</li>
<li><a href="https://github.com/gbv/paia/issues">Comment</a> on the specification and point to errors.</li>
<li>Suggest <a href="https://github.com/gbv/paia/wiki/Use-cases">useful apps and mashups</a> that make use of PAIA.</li>
</ul>
</section>
<section id="conformance-requirements" class="level2">
<h2><span class="header-section-number">1.4</span> Conformance requirements</h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119.</p>
<p>A PAIA server MUST implement <a href="#paia-core">PAIA core</a> and it MAY implement <a href="#paia-auth">PAIA auth</a>. If PAIA auth is not implemented, another way SHOULD BE documented to distribute patron identifiers and access tokens. A PAIA server MAY support only a subset of methods but it MUST return a valid response or error response on every method request, as defined in this document.</p>
</section>
</section>
<section id="general" class="level1">
<h1><span class="header-section-number">2</span> General</h1>
<p>PAIA consists of two independent parts:</p>
<ul>
<li><p><strong><a href="#paia-core">PAIA core</a></strong> defines six basic methods to look up loaned and reserved <a href="#items">items</a>, to <a href="#request">request</a> and <a href="#cancel">cancel</a> loans and reservations, and to look up <a href="#fees">fees</a> and general <a href="#patron">patron</a> information.</p></li>
<li><p><strong><a href="#paia-auth">PAIA auth</a></strong> defines three authentification methods (<a href="#login">login</a>, <a href="#logout">logout</a>, and password <a href="#change">change</a>) to get access tokens, required by PAIA core.</p></li>
</ul>
<p>Each method is accessed at an URL with a common base URL for PAIA core methods and common base URL for PAIA auth methods. A server SHOULD NOT provide additional methods at these base URLs and it MUST NOT propagate additional methods at these base URLs as belonging to PAIA.</p>
<p>In the following, the base URL <a href="https://example.org/core/">https://example.org/core/</a> is used for PAIA core and <a href="https://example.org/auth/">https://example.org/auth/</a> for PAIA auth.</p>
<p>Authentification in PAIA is based on <strong>OAuth 2.0</strong> (RFC 6749) with bearer tokens (RFC 6750) over HTTPS (RFC 2818). For security reasons, PAIA methods MUST be requested via HTTPS only. A PAIA client MUST NOT ignore SSL certificate errors; otherwise access token (PAIA core) or even password (PAIA auth) are compromised by the client.</p>
<section id="request-and-response-format" class="level2">
<h2><span class="header-section-number">2.1</span> Request and response format</h2>
<p>Each PAIA method is identified by a URL and HTTP verb GET or POST. Method calls expect a set of request parameters and return a JSON object. Request parameters and JSON response of PAIA core can be <a href="#paia-ontology">mapped to RDF</a>.</p>
<p>The special request parameter <a href="#access-tokens-and-scopes"><code>access token</code></a> can be sent either as an HTTP query parameter or in an HTTP request header.</p>
<p>For POST methods a request body MUST be included in JSON format in UTF-8. A Content-Type request header MUST be sent with <code>application/json; charset=utf-8</code> or <code>application/json</code>. A PAIA auth server SHOULD additionally accept URL encoded HTTP POST request bodies with content type <code>application/x-www-form-urlencoded</code>. Request encoding ISO-8859-1 MAY be supported in addition to UTF-8 for these requests.</p>
<p>Clients SHOULD include an approriate <code>User-Agent</code> request header with client name and version.</p>
<p>The HTTP response content type of a PAIA response is a JSON object (HTTP header <code>Content-Type: application/json</code>) in UTF8, optionally wrapped as JSONP (HTTP header <code>Content-Type: application/javascript</code>). The charset SHOULD be included as part of the Content-Type header (<code>application/json; charset=utf-8</code> or <code>application/javascript; charset=utf-8</code>)</p>
<p>Every request parameter and every response field is defined with</p>
<ul>
<li>the <strong>name</strong> of the parameter/field</li>
<li>the <strong>ocurrence</strong> (occ) of the parameter/field being one of
<ul>
<li><code>0..1</code> (optional, non repeatable)</li>
<li><code>1..1</code> (mandatory, non repeatable)</li>
<li><code>1..n</code> (mandatory, repeatable)</li>
<li><code>0..n</code> (optional, repeatable)</li>
</ul></li>
<li>the <strong><a href="#data-types">data type</a></strong> of the parameter/field.</li>
<li>a short description</li>
</ul>
<p>Simple parameter names and response fields consist of lowercase letters <code>a-z</code> only.</p>
<p>Repeatable response fields are encoded as JSON arrays, for instance:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span> <span class="dt">&quot;fee&quot;</span> <span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span> <span class="er">...</span> <span class="fu">}</span><span class="ot">,</span> <span class="fu">{</span> <span class="er">...</span> <span class="fu">}</span> <span class="ot">]</span> <span class="fu">}</span></code></pre>
<p>Hierarchical JSON structures in this document are referenced with a dot (<code>.</code>) as separator. For instance the subfield/parameter <code>item</code> of the <code>doc</code> element is referenced as <code>doc.item</code> and refers to the following JSON structure:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span> <span class="dt">&quot;doc&quot;</span> <span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span> <span class="dt">&quot;item&quot;</span> <span class="fu">:</span> <span class="st">&quot;...&quot;</span> <span class="fu">}</span> <span class="ot">]</span> <span class="fu">}</span></code></pre>
</section>
<section id="special-request-parameters" class="level2">
<h2><span class="header-section-number">2.2</span> Special request parameters</h2>
<p>The following special request parameters can be added to any request as URL query parameters:</p>
<dl>
<dt>callback</dt>
<dd>A JavaScript callback method name to return JSONP instead of JSON. The callback MUST only contain alphanumeric characters and underscores. If a callback is given, the response content type MUST be <code>application/javascript</code>.
</dd>
<dt>suppress_response_codes</dt>
<dd>If this parameter is present, <em>all</em> responses MUST be returned with a 200 OK status code, even <a href="#error-response">error responses</a>.
</dd>
</dl>
</section>
<section id="access-tokens-and-scopes" class="level2">
<h2><span class="header-section-number">2.3</span> Access tokens and scopes</h2>
<p>All PAIA methods, with <a href="#login">login</a> from PAIA auth as the only exception, require an <strong>access token</strong> as a special request parameter. The access token is a so called bearer token as described in RFC 6750. The access token can be sent either as a URL query parameter or in an HTTP header. For instance the following requests both get information about patron <code>123</code> with access token <code>vF9dft4qmT</code>:</p>
<pre><code>curl -H &quot;Authorization: Bearer vF9dft4qmT&quot; https://example.org/core/123
curl -H https://example.org/core/123?access_token=vF9dft4qmT</code></pre>
<p>An access token is valid for a limited set of actions, referred to as <strong>scope</strong>. The following scopes are possible for PAIA core:</p>
<dl>
<dt>read_patron</dt>
<dd>Get patron information by the <a href="#patron">patron</a> method.
</dd>
<dt>read_fees</dt>
<dd>Get fees of a patron by the <a href="#fees">fees</a> method.
</dd>
<dt>read_items</dt>
<dd>Get a patron’s item information by the <a href="#items">items</a> method.
</dd>
<dt>write_items</dt>
<dd>Request, renew, and cancel items by the <a href="#request">request</a>, <a href="#renew">renew</a>, and <a href="#cancel">cancel</a> methods.
</dd>
</dl>
<p>For instance a particular token with scopes <code>read_patron</code> and <code>read_items</code> may be used for read-only access to information about a patron, including its loans and requested items but not its fees.</p>
<p>A PAIA server SHOULD send the following HTTP headers with every response:</p>
<dl>
<dt>X-OAuth-Scopes</dt>
<dd>A space-separated list of scopes, the current token has authorized
</dd>
<dt>X-Accepted-OAuth-Scopes</dt>
<dd>A space-separated list of scopes, the current method checks for
</dd>
</dl>
<p>For PAIA auth an additional scope is possible:</p>
<dl>
<dt>change_password</dt>
<dd>Change the password of a patron with the PAIA auth <a href="#change">change</a> method.
</dd>
</dl>
<p>A PAIA core server SHOULD NOT include the <code>change_password</code> scope in the <code>X-OAuth-Scopes</code> header because the scope is limited to PAIA auth. A PAIA auth server MAY send <code>X-OAuth-Scopes</code> and <code>X-Accepted-OAuth-Scopes</code> headers with both PAIA auth scopes and PAIA core scopes.</p>
</section>
<section id="error-response" class="level2">
<h2><span class="header-section-number">2.4</span> Error response</h2>
<p>Two classes of errors must be distinguished:</p>
<dl>
<dt>Document errors</dt>
<dd><p>Unknown document URIs and failed attempts to request, renew, or cancel a document <em>do not result</em> in an error response. Instead they are indicated by the <code>doc.error</code> response field, which SHOULD contain a human-readable error message. Form and type of document error messages are not specified, so clients SHOULD use these strings for display only.</p>
<p>For instance the following response, returned with HTTP status code 200, could result from a <a href="#request">request</a> for an item given by an unknown URI:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;doc&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="fu">{</span>
    <span class="dt">&quot;item&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/some/uri&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;error&quot;</span><span class="fu">:</span> <span class="st">&quot;item URI not found&quot;</span>
  <span class="fu">}</span> <span class="ot">]</span>
<span class="fu">}</span></code></pre>
</dd>
<dt>Request errors</dt>
<dd><p>Malformed requests, failed authentication, unsupported methods, and unexpected server errors such as backend downtime etc. MUST result in an error response. An error response is returned with an HTTP status code 4xx (client error) or 5xx (server error) as defined in RFC 2616, unless the request parameter <code>suppress_response_codes</code> is given.</p>
</dd>
</dl>
<p>The following section only covers request errors.</p>
<p>The response body of a request error is a JSON object with the following fields (compatible with OAuth error response):</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>error</td>
<td>1..1</td>
<td>string</td>
<td>alphanumerical error code</td>
</tr>
<tr class="even">
<td>code</td>
<td>0..1</td>
<td>nonnegative integer</td>
<td>HTTP status error code</td>
</tr>
<tr class="odd">
<td>error_description</td>
<td>0..1</td>
<td>string</td>
<td>Human-readable error description</td>
</tr>
<tr class="even">
<td>error_uri</td>
<td>0..1</td>
<td>string</td>
<td>Human-readable web page about the error</td>
</tr>
</tbody>
</table>
<p>The <code>code</code> field is REQUIRED with request parameter <code>suppress_response_codes</code> in PAIA core. It SHOULD be omitted with PAIA auth requests to not confuse OAuth clients.</p>
<p>The response header of a request error MUST include a <code>WWW-Authenticate</code> header field to indicate the need of providing a proper access token. The field MAY include a short name of the PAIA service with a “realm” parameter:</p>
<pre><code>WWW-Authentificate: Bearer
WWW-Authentificate: Bearer realm=&quot;PAIA Core&quot;</code></pre>
<p>The following error responses are expected:<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<table>
<col style="width: 21%" /><col style="width: 6%" /><col style="width: 71%" /><thead>
<tr class="header">
<th style="text-align: center;">error</th>
<th style="text-align: center;">code</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>not_found</td>
<td>404</td>
<td>Unknown request URL or unknown patron. Implementations SHOULD first check authentication and prefer error <code>invalid_grant</code> or <code>access_denied</code> to prevent leaking patron identifiers.</td>
</tr>
<tr class="even">
<td>not_implemented</td>
<td>501</td>
<td>Known but unsupported request URL (for instance a PAIA auth server server may not implement <code>http://example.org/core/change</code>)</td>
</tr>
<tr class="odd">
<td>invalid_request</td>
<td>405</td>
<td>Unexpected HTTP verb (all but GET, POST, HEAD)</td>
</tr>
<tr class="even">
<td>invalid_request</td>
<td>400</td>
<td>Malformed request (for instance error parsing JSON, unsupported request content type, etc.)</td>
</tr>
<tr class="odd">
<td>invalid_request</td>
<td>422</td>
<td>The request parameters could be parsed but they don’t match the request method (for instance missing fields, invalid values, etc.)</td>
</tr>
<tr class="even">
<td>invalid_grant</td>
<td>401</td>
<td>The access token was missing, invalid, or expired</td>
</tr>
<tr class="odd">
<td>insufficient_scope</td>
<td>403</td>
<td>The access token was accepted but it lacks permission for the request</td>
</tr>
<tr class="even">
<td>access_denied</td>
<td>403</td>
<td>Wrong or missing credentials to get an access token</td>
</tr>
<tr class="odd">
<td>internal_error</td>
<td>500</td>
<td>An unexpected error occurred. This error corresponds to a bug in the implementation of a PAIA auth/core server</td>
</tr>
<tr class="even">
<td>service_unavailable</td>
<td>503</td>
<td>The request couldn’t be serviced because of a temporary failure</td>
</tr>
<tr class="odd">
<td>bad_gateway</td>
<td>502</td>
<td>The request couldn’t be serviced because of a backend failure (for instance the library system’s database)</td>
</tr>
<tr class="even">
<td>gateway_timeout</td>
<td>504</td>
<td>The request couldn’t be serviced because of a backend failure</td>
</tr>
</tbody>
</table>
<p>For instance the following response could result from a request with malformed URIs</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;error&quot;</span><span class="fu">:</span> <span class="st">&quot;invalid_request&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;422&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;error_description&quot;</span><span class="fu">:</span> <span class="st">&quot;malformed item identifier provided: must be an URI&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;error_uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/help/api&quot;</span>
<span class="fu">}</span></code></pre>
</section>
<section id="simple-data-types" class="level2">
<h2><span class="header-section-number">2.5</span> Simple data types</h2>
<p>The following data types are used to define request and response format:</p>
<dl>
<dt>string</dt>
<dd>A Unicode string. Strings MAY be empty.
</dd>
<dt>nonnegative integer</dt>
<dd>An integer number larger than or equal to zero.
</dd>
<dt>boolean</dt>
<dd>Either true or false. Note that omitted boolean values are <em>not</em> false by default but unknown!
</dd>
<dt>date</dt>
<dd>A date value in <code>YYYY-MM-DD</code> format.
</dd>
<dt>datetime</dt>
<dd><p>A date value with mandatory timezone and optional time. The format is <code>YYYY-MM-DD</code>, optionally followed by <code>hh:mm:ss</code>, mandatorily followed by either <code>Z</code> for UTC or <code>+hh:mm</code> or <code>-hh:mm</code> for another timezone, where:</p>
<ul>
<li>YYYY indicates a year</li>
<li>MM indicates a month</li>
<li>DD indicates a day</li>
<li>hh indicates an hour</li>
<li>mm indicates a minute</li>
<li>ss indicates a second</li>
</ul>
</dd>
<dt>money</dt>
<dd>A monetary value with currency (format <code>[0-9]+\.[0-9][0-9] [A-Z][A-Z][A-Z]</code>), for instance <code>0.80 USD</code>.
</dd>
<dt>email</dt>
<dd>A syntactically correct email address.
</dd>
<dt>URI</dt>
<dd><p>A syntactically correct URI.</p>
</dd>
<dt>account state</dt>
<dd><p>A nonnegative integer representing the current state of a patron account. Possible values are:</p>
<ol start="0" type="1">
<li>active</li>
<li>inactive</li>
<li>inactive because account expired</li>
<li>inactive because of outstanding fees</li>
<li>inactive because account expired and outstanding fees</li>
</ol>
<p>A PAIA server MAY define additional states which can be mapped to <code>1</code> by PAIA clients. In JSON account states MUST be encoded as numbers instead of strings.</p>
</dd>
<dt>service status</dt>
<dd><p>A nonnegative integer representing the current status in fulfillment of a service. In most cases the service is related to a document, so the service status is a relation between a particular document and a particular patron. Possible values are:</p>
<ol start="0" type="1">
<li>no relation (this applies to most combinations of document and patron, and it can be expected if no other state is given)</li>
<li>reserved (the document is not accessible for the patron yet, but it will be)</li>
<li>ordered (the document is being made accessible for the patron)</li>
<li>held (the document is on loan by the patron)</li>
<li>provided (the document is ready to be used by the patron)</li>
<li>rejected</li>
</ol>
<p>A PAIA server MUST NOT define any other service status. In JSON service status MUST be encoded as numbers instead of strings.</p>
</dd>
</dl>
</section>
<section id="document-data-type" class="level2">
<h2><span class="header-section-number">2.6</span> Document data type</h2>
<p>A <strong>document</strong> is a key-value structure with the following fields</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>status</td>
<td>1..1</td>
<td>service status</td>
<td>status (0, 1, 2, 3, 4, or 5)</td>
</tr>
<tr class="even">
<td>item</td>
<td>0..1</td>
<td>URI</td>
<td>URI of a particular copy</td>
</tr>
<tr class="odd">
<td>edition</td>
<td>0..1</td>
<td>URI</td>
<td>URI of a the document (no particular copy)</td>
</tr>
<tr class="even">
<td>requested</td>
<td>0..1</td>
<td>URI</td>
<td>URI that was originally requested</td>
</tr>
<tr class="odd">
<td>about</td>
<td>0..1</td>
<td>string</td>
<td>textual description of the document</td>
</tr>
<tr class="even">
<td>label</td>
<td>0..1</td>
<td>string</td>
<td>call number, shelf mark or similar item label</td>
</tr>
<tr class="odd">
<td>queue</td>
<td>0..1</td>
<td>nonnegative integer</td>
<td>number of waiting requests for the document or item</td>
</tr>
<tr class="even">
<td>renewals</td>
<td>0..1</td>
<td>nonnegative integer</td>
<td>number of times the document has been renewed</td>
</tr>
<tr class="odd">
<td>reminder</td>
<td>0..1</td>
<td>nonnegative integer</td>
<td>number of times the patron has been reminded</td>
</tr>
<tr class="even">
<td>starttime</td>
<td>0..1</td>
<td>datetime</td>
<td>date and time when the status began</td>
</tr>
<tr class="odd">
<td>endtime</td>
<td>0..1</td>
<td>datetime</td>
<td>date and time when the status will expire</td>
</tr>
<tr class="even">
<td>duedate</td>
<td>0..1</td>
<td>date</td>
<td>date when the current status will expire (<em>deprecated</em>)</td>
</tr>
<tr class="odd">
<td>cancancel</td>
<td>0..1</td>
<td>boolean</td>
<td>whether an ordered or provided document can be canceled</td>
</tr>
<tr class="even">
<td>canrenew</td>
<td>0..1</td>
<td>boolean</td>
<td>whether a document can be renewed</td>
</tr>
<tr class="odd">
<td>error</td>
<td>0..1</td>
<td>string</td>
<td>error message, for instance if a request was rejected</td>
</tr>
<tr class="even">
<td>storage</td>
<td>0..1</td>
<td>string</td>
<td>location of the document</td>
</tr>
<tr class="odd">
<td>storageid</td>
<td>0..1</td>
<td>URI</td>
<td>location URI</td>
</tr>
</tbody>
</table>
<p>For each document at least an item URI or an edition URI MUST be given. Together, item and edition URI MUST uniquely identify a document within the set of documents related to a patron.</p>
<p>The fields <code>starttime</code> and <code>endtime</code> MUST be interpreted as following:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">status</th>
<th style="text-align: center;">starttime</th>
<th style="text-align: center;">endtime</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>-</td>
<td>-</td>
</tr>
<tr class="even">
<td>1</td>
<td>when the document was reserved</td>
<td>when the reserved document is expected to be available</td>
</tr>
<tr class="odd">
<td>2</td>
<td>when the document was ordered</td>
<td>when the ordered document is expected to be available</td>
</tr>
<tr class="even">
<td>3</td>
<td>when the document was lend</td>
<td>when the loan period ends or ended (due)</td>
</tr>
<tr class="odd">
<td>4</td>
<td>when the document is provided</td>
<td>when the provision will expire</td>
</tr>
<tr class="even">
<td>5</td>
<td>when the request was rejected</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>Note that timezone information is mandatory in these fields. The field <code>duedate</code> is deprecated. Clients SHOULD only use it as <code>endtime</code> if no <code>endtime</code> was given.</p>
<p>The response fields <code>label</code>, <code>storage</code>, <code>storageid</code>, and <code>queue</code> correspond to properties in DAIA.</p>
<p>An example of a document (with status 5=rejected) serialized in JSON is given below. In this case an arbitrary copy of a selected document was requested and mapped to a particular copy that turned out to be not accessible:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
   <span class="dt">&quot;status&quot;</span><span class="fu">:</span>    <span class="dv">5</span><span class="fu">,</span>
   <span class="dt">&quot;item&quot;</span><span class="fu">:</span>      <span class="st">&quot;http://example.org/items/barcode1234567&quot;</span><span class="fu">,</span>
   <span class="dt">&quot;edition&quot;</span><span class="fu">:</span>   <span class="st">&quot;http://example.org/documents/9876543&quot;</span><span class="fu">,</span>
   <span class="dt">&quot;requested&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/documents/9876543&quot;</span><span class="fu">,</span>
   <span class="dt">&quot;error&quot;</span><span class="fu">:</span>     <span class="st">&quot;sorry, we found out that our copy is lost!&quot;</span>
<span class="fu">}</span></code></pre>
<p>See <a href="#documents-in-rdf">documents in RDF</a> for a mapping in RDF.</p>
</section>
</section>
<section id="paia-core" class="level1">
<h1><span class="header-section-number">3</span> PAIA core</h1>
<p>Each API method of PAIA core is accessed at a URL that includes the URI escaped patron identifier.</p>
<section id="patron" class="level2">
<h2><span class="header-section-number">3.1</span> patron</h2>
<dl>
<dt>purpose</dt>
<dd>Get general information about a patron
</dd>
<dt>HTTP verb and URL</dt>
<dd>GET https://example.org/core/<strong>{uri_escaped_patron_identifier}</strong>
</dd>
<dt>scope</dt>
<dd>read_patron
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>name</td>
<td>1..1</td>
<td>string</td>
<td>full name of the patron</td>
</tr>
<tr class="even">
<td>email</td>
<td>0..1</td>
<td>email</td>
<td>email address of the patron</td>
</tr>
<tr class="odd">
<td>expires</td>
<td>0..1</td>
<td>date</td>
<td>date of patron account expiry</td>
</tr>
<tr class="even">
<td>status</td>
<td>0..1</td>
<td>account state</td>
<td>current state (0, 1, 2, or 3)</td>
</tr>
</tbody>
</table>
</dd>
<dt>mapping to RDF</dt>
<dd>see <a href="#patrons-in-rdf">patrons in RDF</a>
</dd>
</dl>
<p>Additional fields such as address may be added in a later revision.</p>
<p><strong>Example</strong></p>
<pre><code>GET /core/123 HTTP/1.1
Host: example.org
User-Agent: MyPAIAClient/1.0
Accept: application/json
Authorization: Bearer a0dedc54bbfae4b</code></pre>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
X-Accepted-OAuth-Scopes: read_patron
X-OAuth-Scopes: read_patron read_fees read_items write_items</code></pre>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Jane Q. Public&quot;</span><span class="fu">,</span> 
  <span class="dt">&quot;email&quot;</span><span class="fu">:</span> <span class="st">&quot;jane@example.org&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;expires&quot;</span><span class="fu">:</span> <span class="st">&quot;2015-05-18&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">0</span>
<span class="fu">}</span></code></pre>
</section>
<section id="items" class="level2">
<h2><span class="header-section-number">3.2</span> items</h2>
<dl>
<dt>purpose</dt>
<dd>Get a list of loans, reservations and other items related to a patron
</dd>
<dt>HTTP verb and URL</dt>
<dd>GET https://example.org/core/<strong>{uri_escaped_patron_identifier}</strong>/items
</dd>
<dt>scope</dt>
<dd>read_item
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>doc</td>
<td>0..n</td>
<td>document</td>
<td>list of documents (order is irrelevant)</td>
</tr>
</tbody>
</table>
</dd>
<dt>mapping to RDF</dt>
<dd>see <a href="#documents-in-rdf">documents in RDF</a>
</dd>
</dl>
<p>In most cases, each document will have an item URI for a particular copy, but users may also have requested an edition.</p>
</section>
<section id="request" class="level2">
<h2><span class="header-section-number">3.3</span> request</h2>
<dl>
<dt>purpose</dt>
<dd>Request one or more items for reservation or delivery.
</dd>
<dt>HTTP verb and URL</dt>
<dd>POST https://example.org/core/<strong>{uri_escaped_patron_identifier}</strong>/request
</dd>
<dt>scope</dt>
<dd>write_item
</dd>
<dt>request parameters</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>doc</td>
<td>1..n</td>
<td></td>
<td>list of documents requested</td>
</tr>
<tr class="even">
<td>doc.item</td>
<td>0..1</td>
<td>URI</td>
<td>URI of a particular item</td>
</tr>
<tr class="odd">
<td>doc.edition</td>
<td>0..1</td>
<td>URI</td>
<td>URI of a particular edition</td>
</tr>
<tr class="even">
<td>doc.storage</td>
<td>0..1</td>
<td>string</td>
<td>Requested pickup location</td>
</tr>
<tr class="odd">
<td>doc.storageid</td>
<td>0..1</td>
<td>URI</td>
<td>Requested pickup location</td>
</tr>
</tbody>
</table>
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>doc</td>
<td>1..n</td>
<td>document</td>
<td>list of documents (order is irrelevant)</td>
</tr>
</tbody>
</table>
</dd>
<dt>mapping to RDF</dt>
<dd>see <a href="#documents-in-rdf">documents in RDF</a>
</dd>
</dl>
<p>The response SHOULD include the same documents as requested. A client MAY also use the <a href="#items">items</a> method to get the service status after request.</p>
</section>
<section id="renew" class="level2">
<h2><span class="header-section-number">3.4</span> renew</h2>
<dl>
<dt>purpose</dt>
<dd>Renew one or more documents usually held by the patron. PAIA servers MAY also allow renewal of reserved, ordered, and provided documents.
</dd>
<dt>HTTP verb and URL</dt>
<dd>POST https://example.org/core/<strong>{uri_escaped_patron_identifier}</strong>/renew
</dd>
<dt>scope</dt>
<dd>write_item
</dd>
<dt>request parameters</dt>
<dd><table>
<tbody>
<tr class="odd">
<td>doc</td>
<td>1..n</td>
<td style="text-align: left;"></td>
<td>list of documents to renew</td>
</tr>
<tr class="even">
<td>doc.item</td>
<td>0..1</td>
<td style="text-align: left;">URI</td>
<td>URI of a particular item</td>
</tr>
<tr class="odd">
<td>doc.edition</td>
<td>0..1</td>
<td style="text-align: left;">URI</td>
<td>URI of a particular edition</td>
</tr>
</tbody>
</table>
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>doc</td>
<td>1..n</td>
<td>document</td>
<td>list of documents (order is irrelevant)</td>
</tr>
</tbody>
</table>
</dd>
<dt>mapping to RDF</dt>
<dd>see <a href="#documents-in-rdf">documents in RDF</a>
</dd>
</dl>
<p>The response SHOULD include the same documents as requested. A client MAY also use the <a href="#items">items</a> method to get the service status after renewal.</p>
</section>
<section id="cancel" class="level2">
<h2><span class="header-section-number">3.5</span> cancel</h2>
<dl>
<dt>purpose</dt>
<dd>Cancel requests for items.
</dd>
<dt>HTTP verb and URL</dt>
<dd>POST https://example.org/core/<strong>{uri_escaped_patron_identifier}</strong>/cancel
</dd>
<dt>scope</dt>
<dd>write_item
</dd>
<dt>request parameters</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>doc</td>
<td>1..n</td>
<td></td>
<td style="text-align: left;">list of documents to cancel</td>
</tr>
<tr class="even">
<td>doc.item</td>
<td>0..1</td>
<td>URI</td>
<td style="text-align: left;">URI of a particular item</td>
</tr>
<tr class="odd">
<td>doc.edition</td>
<td>0..1</td>
<td>URI</td>
<td style="text-align: left;">URI of a particular edition</td>
</tr>
</tbody>
</table>
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>doc</td>
<td>1..n</td>
<td>document</td>
<td>list of documents (order is irrelevant)</td>
</tr>
</tbody>
</table>
</dd>
<dt>mapping to RDF</dt>
<dd>see <a href="#documents-in-rdf">documents in RDF</a>
</dd>
</dl>
</section>
<section id="fees" class="level2">
<h2><span class="header-section-number">3.6</span> fees</h2>
<dl>
<dt>purpose</dt>
<dd>Look up current fees of a patron.
</dd>
<dt>HTTP verb and URL</dt>
<dd>GET https://example.org/core/<strong>{uri_escaped_patron_identifier}</strong>/fees
</dd>
<dt>scope</dt>
<dd>read_fees
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>amount</td>
<td>0..1</td>
<td>money</td>
<td>Sum of all fees. May also be negative!</td>
</tr>
<tr class="even">
<td>fee</td>
<td>0..n</td>
<td></td>
<td>list of fees</td>
</tr>
<tr class="odd">
<td>fee.amount</td>
<td>1..1</td>
<td>money</td>
<td>amount of a single fee</td>
</tr>
<tr class="even">
<td>fee.date</td>
<td>0..1</td>
<td>date</td>
<td>date when the fee was claimed</td>
</tr>
<tr class="odd">
<td>fee.about</td>
<td>0..1</td>
<td>string</td>
<td>textual information about the fee</td>
</tr>
<tr class="even">
<td>fee.item</td>
<td>0..1</td>
<td>URI</td>
<td>item that caused the fee</td>
</tr>
<tr class="odd">
<td>fee.edition</td>
<td>0..1</td>
<td>URI</td>
<td>edition that caused the fee</td>
</tr>
<tr class="even">
<td>fee.feetype</td>
<td>0..1</td>
<td>string</td>
<td>textual description of the type of fee</td>
</tr>
<tr class="odd">
<td>fee.feeid</td>
<td>0..1</td>
<td>URI</td>
<td>URI of the type of fee</td>
</tr>
</tbody>
</table>
</dd>
<dt>mapping to RDF</dt>
<dd>see <a href="#fees-in-rdf">fees in RDF</a>
</dd>
</dl>
<p>If given, <code>fee.feetype</code> MUST NOT refer to the individual fee but to the type of fee. A PAIA server MUST return identical values of <code>fee.feetype</code> for identical <code>fee.feeid</code>. The default value of <code>fee.feeid</code> is:</p>
<ul>
<li><a href="http://purl.org/ontology/dso#DocumentService">http://purl.org/ontology/dso#DocumentService</a> if <code>fee.item</code> or <code>fee.edition</code> is set,</li>
<li><a href="http://purl.org/ontology/service#Service">http://purl.org/ontology/service#Service</a> otherwise (<em>experimental!</em>).</li>
</ul>
<p>If a fee was caused by a document (<code>fee.item</code> or <code>fee.edition</code>), the value of <code>fee.feeid</code> SHOULD be a class URI from the <a href="http://gbv.github.io/dso/">Document Service Ontology</a>.</p>
</section>
</section>
<section id="paia-auth" class="level1">
<h1><span class="header-section-number">4</span> PAIA auth</h1>
<p><strong>PAIA auth</strong> defines three methods for authentication based on username and password. These methods can be used to get access tokens and patron identifiers, which are required to access <strong><a href="#paia-core">PAIA core</a></strong> methods. There MAY be additional or alternative ways to distribute and manage access tokens and patron identifiers.</p>
<p>There is no strict one-to-one relationship between username/password and patron identifier/access token, but a username SHOULD uniquely identify a patron identifier. A username MAY even be equal to a patron identifier, but this is NOT RECOMMENDED. An access token MUST NOT be equal to the password of the same user.</p>
<p>A <strong>PAIA auth</strong> server acts as OAuth authorization server (RFC 6749) with password credentials grant, as defined in section 4.3 of the OAuth 2.0 specification. The access tokens provided by the server are so called OAuth 2.0 bearer tokens (RFC 6750).</p>
<p>A <strong>PAIA auth</strong> server MUST protect against brute force attacks (e.g. using rate-limitation or generating alerts). It is RECOMMENDED to further restrict access to <strong>PAIA auth</strong> to specific clients, for instance by additional authorization.</p>
<section id="login" class="level2">
<h2><span class="header-section-number">4.1</span> login</h2>
<p>The PAIA auth <code>login</code> method is the only PAIA method that does not require an access token as part of the query.</p>
<dl>
<dt>purpose</dt>
<dd>Get a patron identifier and access token to access patron information
</dd>
<dt>URL</dt>
<dd>POST https://example.org/auth/<strong>login</strong> (in addition a PAIA auth server MAY support HTTP GET requests)
</dd>
<dt>request parameters</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: left;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>username</td>
<td>1..1</td>
<td>string</td>
<td style="text-align: left;">User name of a patron</td>
</tr>
<tr class="even">
<td>password</td>
<td>1..1</td>
<td>string</td>
<td style="text-align: left;">Password of a patron</td>
</tr>
<tr class="odd">
<td>grant_type</td>
<td>1..1</td>
<td>string</td>
<td style="text-align: left;">Fixed value set to “password”</td>
</tr>
<tr class="even">
<td>scope</td>
<td>0..1</td>
<td>string</td>
<td style="text-align: left;">Space separated list of scopes</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>If no <code>scope</code> parameter is given, it is set to the default value <code>read_patron read_fees read_items write_items</code> for full access to all PAIA core methods (see <a href="#access-tokens-and-scopes">access tokens and scopes</a>).</p>
<p>The response format is a JSON structure as defined in section 5.1 (successful response) and section 5.2 (error response) of OAuth 2.0. The PAIA auth server MAY grant different scopes than requested for, for instance if the account of a patron has expired, so the patron should not be allowed to request and renew new documents.</p>
<dl>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>patron</td>
<td>1..1</td>
<td>string</td>
<td>Patron identifier</td>
</tr>
<tr class="even">
<td>access_token</td>
<td>1..1</td>
<td>string</td>
<td>The access token issued by the PAIA auth server</td>
</tr>
<tr class="odd">
<td>token_type</td>
<td>1..1</td>
<td>string</td>
<td>Fixed value set to “Bearer” or “bearer”</td>
</tr>
<tr class="even">
<td>scope</td>
<td>1..1</td>
<td>string</td>
<td>Space separated list of granted scopes</td>
</tr>
<tr class="odd">
<td>expires_in</td>
<td>0..1</td>
<td>nonnegative integer</td>
<td>The lifetime in seconds of the access token</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p><strong>Example of a successful login request</strong></p>
<pre><code>POST /auth/login
Host: example.org
User-Agent: MyPAIAClient/1.0
Accept: application/json
Content-Type: application/json
Content-Length: 85</code></pre>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;username&quot;</span><span class="fu">:</span> <span class="st">&quot;alice02&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;password&quot;</span><span class="fu">:</span> <span class="st">&quot;jo-!97kdl+tt&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;grant_type&quot;</span><span class="fu">:</span> <span class="st">&quot;password&quot;</span>
<span class="fu">}</span></code></pre>
<pre><code>HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
X-OAuth-Scopes: read_patron read_fees read_items write_items
Cache-Control: no-store
Pragma: no-cache</code></pre>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;access_token&quot;</span><span class="fu">:</span> <span class="st">&quot;2YotnFZFEjr1zCsicMWpAA&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;token_type&quot;</span><span class="fu">:</span> <span class="st">&quot;Bearer&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;expires_in&quot;</span><span class="fu">:</span> <span class="dv">3600</span><span class="fu">,</span>
  <span class="dt">&quot;patron&quot;</span><span class="fu">:</span> <span class="st">&quot;8362432&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;scope&quot;</span><span class="fu">:</span> <span class="st">&quot;read_patron read_fees read_items write_items&quot;</span>
<span class="fu">}</span></code></pre>
<p><strong>Example of a rejected login request</strong></p>
<pre><code>HTTP/1.1 403 Forbidden
Content-Type: application/json; charset=utf-8
Cache-Control: no-store
Pragma: no-cache
WWW-Authenticate: Bearer realm=&quot;PAIA auth example&quot;</code></pre>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span>
  <span class="dt">&quot;error&quot;</span><span class="fu">:</span> <span class="st">&quot;access_denied&quot;</span><span class="fu">,</span>
  <span class="dt">&quot;error_description&quot;</span><span class="fu">:</span> <span class="st">&quot;invalid patron or password&quot;</span>
<span class="fu">}</span></code></pre>
</section>
<section id="logout" class="level2">
<h2><span class="header-section-number">4.2</span> logout</h2>
<dl>
<dt>purpose</dt>
<dd>Invalidate an access token
</dd>
<dt>URL</dt>
<dd>POST https://example.org/auth/<strong>logout</strong> (in addition a PAIA auth server MAY support HTTP GET requests)
</dd>
<dt>request parameters</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>patron</td>
<td>1..1</td>
<td>string</td>
<td>patron identifier</td>
</tr>
</tbody>
</table>
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>patron</td>
<td>1..1</td>
<td>string</td>
<td>patron identifier</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>The logout method invalidates an access token, independent from the previous lifetime of the token. On success, the server MUST invalidate at least the access token that was used to access this method. The server MAY further invalidate additional access tokens that were created for the same patron.</p>
</section>
<section id="change" class="level2">
<h2><span class="header-section-number">4.3</span> change</h2>
<dl>
<dt>purpose</dt>
<dd>Change password of a patron
</dd>
<dt>URL</dt>
<dd>POST https://example.org/auth/<strong>change</strong>
</dd>
<dt>scope</dt>
<dd>change_password
</dd>
<dt>request parameters</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>patron</td>
<td>1..1</td>
<td>string</td>
<td>Patron identifier</td>
</tr>
<tr class="even">
<td>username</td>
<td>1..1</td>
<td>string</td>
<td>User name of the patron</td>
</tr>
<tr class="odd">
<td>old_password</td>
<td>1..1</td>
<td>string</td>
<td>Password of the patron</td>
</tr>
<tr class="even">
<td>new_password</td>
<td>1..1</td>
<td>string</td>
<td>New password of the patron</td>
</tr>
</tbody>
</table>
</dd>
<dt>response fields</dt>
<dd><table>
<thead>
<tr class="header">
<th style="text-align: center;">name</th>
<th style="text-align: center;">occ</th>
<th style="text-align: center;">data type</th>
<th style="text-align: center;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>patron</td>
<td>1..1</td>
<td>string</td>
<td>patron identifier</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>The server MUST check</p>
<ul>
<li>the access token</li>
<li>whether username and password match</li>
<li>whether the user identified by username has scope <code>change_password</code></li>
</ul>
<p>A PAIA server MAY reject this method and return an <a href="#error-response">error response</a> with error code <code>access_denied</code> (403) or error code <code>not_implemented</code> (501). On success, the patron identifier is returned.</p>
</section>
</section>
<section id="paia-ontology" class="level1">
<h1><span class="header-section-number">5</span> PAIA Ontology</h1>
<p>Information expressed by PAIA core responses in JSON, can be expressed in RDF as well. The <strong>PAIA Ontology</strong> defines an RDF ontology for this purpose.</p>
<p><em>The Ontology has not been finalized yet!</em></p>
<p>PAIA Ontology reuses classes and properties from other ontologies and defines a small set of additional classes, properties, and individuals to express information about <a href="#patrons-in-rdf">patrons in RDF</a>, <a href="#documents-in-rdf">documents in RDF</a>, and <a href="#fees-in-rdf">fees in RDF</a>.</p>
<p>RDF Serializations of PAIA Ontology are available in RDF/Turtle (<a href="./paia.ttl"><strong><code>paia.ttl</code></strong></a>) and in RDF/XML (<a href="./paia.owl"><strong><code>paia.owl</code></strong></a>).</p>
<section id="namespaces-and-ontology" class="level2">
<h2><span class="header-section-number">5.1</span> Namespaces and Ontology</h2>
<p>The URI namespace of PAIA ontology is <a href="http://purl.org/ontology/paia#">http://purl.org/ontology/paia#</a>. The namespace prefix <code>paia</code> is recommended. The URI of PAIA ontology as a whole is <a href="http://purl.org/ontology/paia">http://purl.org/ontology/paia</a>.</p>
<pre class="ttl"><code>@prefix paia: &lt;http://purl.org/ontology/paia#&gt; .
@base         &lt;http://purl.org/ontology/paia&gt; .</code></pre>
<p>The following namspace prefixes are used to refer to related ontologies:</p>
<pre class="ttl"><code>@prefix bibo:    &lt;http://purl.org/ontology/bibo/&gt; .
@prefix cc:      &lt;http://creativecommons.org/ns#&gt; .
@prefix daia:    &lt;http://purl.org/ontology/daia/&gt; .
@prefix dct:     &lt;http://purl.org/dc/terms/&gt; .
@prefix dso:     &lt;http://purl.org/ontology/dso#&gt; .
@prefix frbr:    &lt;http://purl.org/vocab/frbr/core#&gt; .
@prefix holding: &lt;http://purl.org/ontology/holding#&gt; .
@prefix owl:     &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdfs:    &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix ssso:    &lt;http://purl.org/ontology/ssso#&gt; .
@prefix vann:    &lt;http://purl.org/vocab/vann/&gt; .
@prefix voaf:    &lt;http://purl.org/vocommons/voaf#&gt; .
@prefix xsd:     &lt;http://www.w3.org/2001/XMLSchema#&gt; .</code></pre>
<p>PAIA Ontology is defined in RDF/Turtle as following:</p>
<pre class="ttl"><code>&lt;&gt; a owl:Ontology, voaf:Vocabulary ;
    dct:title &quot;PAIA Ontology&quot;@en ;
    rdfs:label &quot;PAIA&quot; ;
    vann:preferredNamespacePrefix &quot;paia&quot; ;
    vann:preferredNamespaceUri &quot;http://purl.org/ontology/paia#&quot; ;
    dct:description &quot;An ontology to express library patron information, such as loans, reservations, and fees.&quot;@en ;
    dct:modified &quot;2014-07-11&quot;^^xsd:date ;
    owl:versionInfo &quot;1.0.3&quot; ;
    cc:license &lt;http://creativecommons.org/licenses/by/3.0/&gt; ;
    dct:creator &quot;Jakob Voß&quot; . </code></pre>
</section>
<section id="patrons-in-rdf" class="level2">
<h2><span class="header-section-number">5.2</span> Patrons in RDF</h2>
<p>A patron account, as returned by the PAIA core method <a href="#patron">patron</a> is represented by an instance of the class <strong>paia:PatronAccount</strong>. Every patron account is also an instance of <a href="http://rdfs.org/sioc/ns#User">sioc:User</a> (and therefore also of <a href="http://xmlns.com/foaf/0.1/OnlineAccount">foaf:OnlineAccount</a>) and an instance of <a href="http://purl.org/vocab/participation/schema#Role">particip:Role</a>. The date of expiration can be expressed with <a href="http://purl.org/vocab/participation/schema#endDate">particip:endDate</a>. The patron identifier is given with <a href="http://xmlns.com/foaf/0.1/AccountName">foaf:AccountName</a>.</p>
<p>A patron account belongs to a person or another <a href="http://xmlns.com/foaf/0.1/Agent">foaf:Agent</a>, connected to with <a href="http://rdfs.org/sioc/ns#account_of">sioc:account_of</a> and <a href="http://xmlns.com/foaf/0.1/account">foaf:account</a>. The full name of a patron is given with <a href="http://xmlns.com/foaf/0.1/name">foaf:name</a> and its email address can be given with <a href="http://xmlns.com/foaf/0.1/mbox">foaf:mbox</a>.</p>
<pre class="ttl"><code>@prefix sioc:     &lt;http://rdfs.org/sioc/ns#&gt; .
@prefix foaf:     &lt;http://xmlns.com/foaf/0.1/&gt; .
@prefix particip: &lt;http://purl.org/vocab/participation/schema#&gt; .

paia:PatronAccount a owl:Class ;
    rdfs:label &quot;PatronAccount&quot;@en ;
    rdfs:subClassOf sioc:User, foaf:OnlineAccount, particip:Role ;
    rdfs:isDefinedBy &lt;&gt; ;
    rdfs:seeAlso
        sioc:account_of, foaf:account, particip:endDate, 
        foaf:name, foaf:mbox . </code></pre>
<p>An instance of paia:patronAccount is assumed to be active, unless it is also an instance of <strong>paia:InactivePatronAccount</strong>.</p>
<pre class="ttl"><code>paia:InactivePatronAccount a owl:Class ;
    rdfs:label &quot;InactivePatronAccount&quot;@en ;
    rdfs:isDefinedBy &lt;&gt; ;
    rdfs:subClassOf paia:PatronAccount .</code></pre>
<p>Reasons for inactivation can be given with property <strong>paia:inactivationReason</strong>. The inactivation reasons <strong>paia:AccountExpired</strong> and <strong>paia:OutstandingFees</strong> SHOULD be linked to.</p>
<pre class="ttl"><code>paia:inactivationReason a rdfs:Property ;
    rdfs:label &quot;inactivationReason&quot;@en ; 
    rdfs:isDefinedBy &lt;&gt; ;
    rdfs:domain paia:InactivePatronAccount . 
paia:AccountExpired a rdfs:Resource ;
    rdfs:isDefinedBy &lt;&gt; ;
    rdfs:label &quot;AccountExpired&quot;@en .
paia:OutstandingFees a rdfs:Resource ;
    rdfs:isDefinedBy &lt;&gt; ;
    rdfs:label &quot;OutstandingFees&quot;@en .</code></pre>
</section>
<section id="items-in-rdf" class="level2">
<h2><span class="header-section-number">5.3</span> Items in RDF</h2>
<p>Lists of <a href="#document-data-type">documents</a>, as returned by the PAIA core methods <a href="#items">items</a>, <a href="#request">request</a>, <a href="#renew">renew</a>, and <a href="#cancel">cancel</a>, are represented as sets of events. Each event is an instance of <strong><a href="http://purl.org/ontology/ssso#ServiceEvent">ssso:ServiceEvent</a></strong> from the <a href="http://purl.org/ontology/ssso">Simple Service Status Ontology</a> (SSSO) and an instance of of a specific document service class defined in the <a href="http://gbv.github.io/dso/">Document Service Ontology</a> (DSO).</p>
<p>The current <a href="#data-types">service status</a> of a document service event is given by an instance-relationship (rdf:type) with one of the following classes:</p>
<ul>
<li><a href="http://purl.org/ontology/ssso#ReservedService">ssso:ReservedService</a> for service status 1 (reserved)</li>
<li><a href="http://purl.org/ontology/ssso#PreparedService">ssso:PreparedService</a> for service status 2 (ordered)</li>
<li><a href="http://purl.org/ontology/ssso#ExecutedService">ssso:ExecutedService</a> for service status 3 (held)</li>
<li><a href="http://purl.org/ontology/ssso#ProvidedService">ssso:ProvidedService</a> for service status 4 (provided)</li>
<li><a href="http://purl.org/ontology/ssso#RejectedService">ssso:RejectedService</a> for service status 5 (rejected)</li>
</ul>
<p>The specific type of service is further given by in instance-relationship with on of the following classes (<em>this needs some clarification!</em>):</p>
<ul>
<li><a href="http://purl.org/ontology/dso#Loan">dso:Loan</a> (borrow to use at home for a limited time)</li>
<li><a href="http://purl.org/ontology/dso#Presentation">dso:Presentation</a> (view/use within the boundaries of a library)</li>
<li><a href="http://purl.org/ontology/dso#Interloan">dso:Interloan</a> (get a document/copy mediated from another library)</li>
<li><a href="http://purl.org/ontology/dso#OpenAccess">dso:OpenAccess</a> (get directed to the location of a publicly available document)</li>
</ul>
<pre class="ttl"><code>ssso:ServiceEvent a owl:Class ;
    rdfs:label &quot;ServiceEvent&quot;@en ;
    rdfs:isDefinedBy &lt;http://purl.org/ontology/ssso&gt; .
dso:DocumentService a owl:Class ;
    rdfs:label &quot;DocumentService&quot;@en ;
    rdfs:isDefinedBy &lt;http://purl.org/ontology/dso&gt; .
dso:ServiceConsumer a owl:Class ;
    rdfs:label &quot;ServiceConsumer&quot;@en ;
    rdfs:isDefinedBy &lt;http://purl.org/ontology/service&gt; .</code></pre>
<p>The service event is connected to a patron as <a href="http://purl.org/ontology/service#ServiceConsumer">service:ServiceConsumer</a> (with property <a href="http://purl.org/ontology/service#consumedBy">service:consumedBy</a>) and to a document (<em>with a property yet to be defined</em>).</p>
<p>The <code>starttime</code> end <code>endtime</code> can be mapped to any of the following properties, among others:</p>
<dl>
<dt>starttime</dt>
<dd>schema:startDate, prov:prov:startedAtTime, prov:qualifiedStart
</dd>
<dt>endtime</dt>
<dd>schema:endDate, prov:endedAtTime, prov:qualifiedEnd
</dd>
</dl>
</section>
<section id="fees-in-rdf" class="level2">
<h2><span class="header-section-number">5.4</span> Fees in RDF</h2>
<p>A fee, as returned by the method <a href="#fees">fees</a>, is an amount of money that has to be paid by a patron for some reason. Each fee is represented by the following properties of a <code>ssso:ServiceEvent</code> instance:</p>
<ul>
<li><code>dc:date</code> (or a more specific sub property) for <code>fee.date</code></li>
<li><code>schema:price</code> and <code>schema:priceCurrency</code> for <code>fee.amount</code></li>
<li><code>dc:description</code> for <code>fee.about</code></li>
<li>Maybe <code>schema:itemOffered</code> to connect to a document or document service (item and/or edition).</li>
</ul>
<p>The type of fee is represented by a class from the <a href="http://gbv.github.io/dso/">Document Service Ontology</a> or by another subclass of class <a href="http://purl.org/ontology/ssso#ServiceEvent">ServiceEvent</a> from the <a href="http://purl.org/ontology/ssso">Simple Service Status Ontology</a>. All URIs returned in <code>fee.feeid</code> SHOULD be resolvable as Linked Open Data.</p>
</section>
</section>
<section id="glossary" class="level1">
<h1><span class="header-section-number">6</span> Glossary</h1>
<dl>
<dt>access token</dt>
<dd>A confidential random string that must be sent with each PAIA request for authentication.
</dd>
<dt>document</dt>
<dd>A concrete or abstract document, such as a work, or an edition.
</dd>
<dt>item</dt>
<dd>A concrete copy of a document, for instance a particular physical book.
</dd>
<dt>PAIA auth server</dt>
<dd>HTTP endpoint that implements the PAIA auth specification, so all PAIA auth methods can be accessed at a common base URL.
</dd>
<dt>PAIA core server</dt>
<dd>HTTP endpoint that implements the PAIA core specification, so all PAIA core methods can be accessed at a common base URL.
</dd>
<dt>patron</dt>
<dd>An account of a library user
</dd>
<dt>patron identifier</dt>
<dd>A Unicode string that identifies a library patron account.
</dd>
</dl>
</section>
<section id="security-considerations" class="level1">
<h1><span class="header-section-number">7</span> Security Considerations</h1>
<p>Security of OAuth 2.0 with bearer tokens relies on correct application of HTTPS. It is known that SSL certificate errors are often ignored just because of laziness. It MUST be clear to all implementors that this breaks the chain of trust and is as secure as sending access tokens in plain text.</p>
<p>To limit the risk of spoiled access tokens, PAIA servers SHOULD put limits on the lifetime of access tokens and on the number of allowed requests per minute among other security limitations.</p>
<p>It is also known that several library systems allow weak passwords. For this reason PAIA auth servers MUST follow appropriate security measures, such as protecting against brute force attacks and blocking accounts with weak passwords or with passwords that have been sent unencrypted.</p>
</section>
<section id="informative-parts" class="level1">
<h1><span class="header-section-number">8</span> Informative parts</h1>
<p>This non-normative section contains additional examples and explanations to illustrate the semantics of PAIA concepts and methods and usage.</p>
<section id="transitions-of-service-states" class="level2">
<h2><span class="header-section-number">8.1</span> Transitions of service states</h2>
<p>Six service status <a href="#data-types">data type</a> values are possible. One document can have different status for different patrons and for different times. The following table illustrates reasonable transitions of service status with time for a fixed patron. For instance some document held by another patron is first requested (0 → 1) with PAIA method <a href="#request">request</a>, made available after return (1 → 4), picked up (4 → 3), renewed after some time with PAIA method <a href="#renew">renew</a> (3 → 3) and later returned (3 → 0).</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">transition →</th>
<th style="text-align: center;">0</th>
<th style="text-align: center;">1: reserved</th>
<th style="text-align: center;">2: ordered</th>
<th style="text-align: center;">3: held</th>
<th style="text-align: center;">4: provided</th>
<th style="text-align: center;">5: rejected</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>=</td>
<td><code>request</code></td>
<td><code>request</code></td>
<td>loan</td>
<td><code>request</code></td>
<td><code>request</code></td>
</tr>
<tr class="even">
<td>1: reserved</td>
<td><code>cancel</code></td>
<td>=</td>
<td>available</td>
<td>loan</td>
<td>available</td>
<td>patron inactive, document lost …</td>
</tr>
<tr class="odd">
<td>2: ordered</td>
<td><code>cancel</code></td>
<td>/</td>
<td>=</td>
<td>loan</td>
<td>available</td>
<td>patron inactive, document lost …</td>
</tr>
<tr class="even">
<td>3: held</td>
<td>return</td>
<td>/</td>
<td>/</td>
<td><code>renew</code></td>
<td>/</td>
<td>/</td>
</tr>
<tr class="odd">
<td>4: provided</td>
<td>not picked up</td>
<td>/</td>
<td>/</td>
<td>loan</td>
<td>=</td>
<td>patron inactive, …</td>
</tr>
<tr class="even">
<td>5: rejected</td>
<td>time passed</td>
<td>patron active</td>
<td>patron active</td>
<td>/</td>
<td>patron active</td>
<td>=</td>
</tr>
</tbody>
</table>
<p>Transitions marked with “/” may also be possible in special circumstances: for instance a book ordered from the stacks (status 2) may turn out to be damaged, so it is first repaired and reserved for the patron meanwhile (status 1). Transitions for digital publications may also be different. Note that a PAIA server does not need to implement all service status. A reasonable subset is to only support 0, 1, 3, and 5.</p>
</section>
<section id="digital-documents" class="level2">
<h2><span class="header-section-number">8.2</span> Digital documents</h2>
<p>The handling of digital documents is subject to frequently asked questions. The following rules of thumb may help:</p>
<ul>
<li>For most digital documents the concept of an item does not make sense and there is no URI of a particular copy. In this case the <code>document.edition</code> field should be used instead of <code>document.item</code>.</li>
<li>For some digital documents there may be no distinction between status <code>provided</code> and status <code>held</code>. The status <code>provided</code> should be preferred when the same document can be used by multiple patrons at the same time, and <code>held</code> should be used when the document can exclusively be used by the patron.</li>
</ul>
</section>
<section id="paia-core-extensions-to-non-document-services" class="level2">
<h2><span class="header-section-number">8.3</span> PAIA core extensions to non-document services</h2>
<p>A future version of PAIA may be extended to support services not related to documents. For instance a patron may reserve a cabin or some other facility. The following methods may be added to PAIA core for this purpose:</p>
<dl>
<dt>services</dt>
<dd><p>List non-document services related to a patron - similar to method <a href="#items">items</a>.</p>
</dd>
<dt>servicetypes</dt>
<dd><p>Get a list of services that a patron may request, each with URI, name, and short description.</p>
</dd>
</dl>
<hr />
</section>
</section>
<section id="references" class="level1">
<h1><span class="header-section-number">9</span> References</h1>
<section id="normative-references" class="level2">
<h2><span class="header-section-number">9.1</span> Normative References</h2>
<ul>
<li><p>Bradner, S. 1997. “RFC 2119: Key words for use in RFCs to Indicate Requirement Levels”. <a href="http://tools.ietf.org/html/rfc2119">http://tools.ietf.org/html/rfc2119</a>.</p></li>
<li><p>Crockford, D. 2006. “RFC 6427: The application/json Media Type for JavaScript Object Notation (JSON)”. <a href="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</a>.</p></li>
<li><p>Fielding, R. 1999. “RFC 2616: Hypertext Transfer Protocol”. <a href="http://tools.ietf.org/html/rfc2616">http://tools.ietf.org/html/rfc2616</a>.</p></li>
<li><p>D. Hardt. 2012. “RFC 6749: The OAuth 2.0 Authorization Framework”. <a href="http://tools.ietf.org/html/rfc6749">http://tools.ietf.org/html/rfc6749</a>.</p></li>
<li><p>Jones, M. and Hardt, D. 2012. “RFC 6750: The OAuth 2.0 Authorization Framework: Bearer Token Usage”. <a href="http://tools.ietf.org/html/rfc6750">http://tools.ietf.org/html/rfc6750</a>.</p></li>
<li><p>Rescorla, E. 2000. “RFC 2818: HTTP over TLS.” <a href="http://tools.ietf.org/html/rfc2818">http://tools.ietf.org/html/rfc2818</a>.</p></li>
</ul>
</section>
<section id="informative-references" class="level2">
<h2><span class="header-section-number">9.2</span> Informative References</h2>
<ul>
<li><p>3M. 2006. “3M Standard Interchange Protocol Version 2.00“. <a href="http://mws9.3m.com/mws/mediawebserver.dyn?6666660Zjcf6lVs6EVs66S0LeCOrrrrQ-">http://mws9.3m.com/mws/mediawebserver.dyn?6666660Zjcf6lVs6EVs66S0LeCOrrrrQ-</a>.</p></li>
<li><p>ILS-DI. 2008. “DLF ILS Discovery Interface Task Group (ILS-DI) Technical Recommendation - revision 1.1“ <a href="http://old.diglib.org/architectures/ilsdi/">http://old.diglib.org/architectures/ilsdi/</a>.</p></li>
<li><p>Katz, D. 2013. “ILS Driver (VuFind 2.x)“. <a href="http://vufind.org/wiki/vufind2:building_an_ils_driver">http://vufind.org/wiki/vufind2:building_an_ils_driver</a>.</p></li>
<li><p>Klee, C. and Voss, J. 2014. “Holding Ontology“. <a href="http://purl.org/ontology/holding">http://purl.org/ontology/holding</a>.</p></li>
<li><p>NISO. 2010. “NISO Circulation Interchange Protocol (NCIP) - Z39.83-1-2008 Version 2.01“. <a href="http://www.ncip.info/">http://www.ncip.info/</a>.</p></li>
<li><p>Styles, Rob, Wallace, Chris and Moeller, Knud. 2008. “Participation schema“. <a href="http://vocab.org/participation/schema">http://vocab.org/participation/schema</a>.</p></li>
<li><p>Voss, J. 2012. “DAIA ontology“. <a href="http://purl.org/ontology/daia">http://purl.org/ontology/daia</a>.</p></li>
<li><p>Voss, J. 2013. “Simple Service Status Ontology“. <a href="http://purl.org/ontology/ssso">http://purl.org/ontology/ssso</a>.</p></li>
<li><p>Voss, J. 2013. “Document Service Ontology“. <a href="http://gbv.github.io/dso/">http://gbv.github.io/dso/</a>.</p></li>
</ul>
</section>
<section id="revision-history" class="level2">
<h2><span class="header-section-number">9.3</span> Revision history</h2>
<p>The current version of this document was last modified at 2014-07-11 with revision <a href="http://github.com/gbv/paia/commit/0425f2a4f0b0a37426ebb0e231d08a342bd9b037">0425f2a</a>.</p>
<ul>
<li><a href="paia-0425f2a.html"><code>2014-07-11 11:02:00 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/0425f2a4f0b0a37426ebb0e231d08a342bd9b037">introduce starttime and endtime</a></li>
<li><a href="paia-a31350e.html"><code>2014-07-02 11:54:22 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/a31350e9f042082866a219d8f87bb9f9615cafb0">ontology</a></li>
<li><a href="paia-f7d18b4.html"><code>2014-06-30 16:32:41 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/f7d18b4169181ccb92659589e591ad3596369b96">Clients should send User-Agent header (issue #35)</a></li>
<li><a href="paia-5ac73f0.html"><code>2014-05-16 09:26:25 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/5ac73f0e460e6f83dcaee1f501e5dd22edee95c6">make clear that document errors are not specified</a></li>
<li><a href="paia-96ce9cb.html"><code>2013-11-20 12:57:11 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/96ce9cbb3be5f67c8db51a6ac05ec76de4287f44">example of a document error response</a></li>
<li><a href="paia-06f6338.html"><code>2013-11-18 14:33:19 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/06f633830f6bbceeb81c1c7d167124778a51556e">extended PAIA ontology</a></li>
<li><a href="paia-7f04903.html"><code>2013-10-31 12:32:07 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/7f04903aa3c9d0e859f61a8007ed53bcd8f8bae4">updated makespec</a></li>
<li><a href="paia-a0f7a8b.html"><code>2013-10-31 10:56:44 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/a0f7a8b9903dc429f98ce7dc7e1fe23d5c99f1c2">Corrected logical, grammar, and spelling mistakes</a></li>
<li><a href="paia-3853fb0.html"><code>2013-07-17 09:34:52 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/3853fb06c01fce4a23ea3a716f2ac156707a5007">remove ‘code’ in PAIA auth error response, close #14</a></li>
<li><a href="paia-03ff75a.html"><code>2013-07-17 09:25:57 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/03ff75af0c7eae33daf5e2323149501d19508364">update makespec, closes issue #8 on charset</a></li>
<li><a href="paia-f674725.html"><code>2013-04-16 12:15:42 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/f674725619979632da8beb2e243e6be168fd1931">synopsis, ontology, and informative parts</a></li>
<li><a href="paia-d38607c.html"><code>2013-04-15 09:05:50 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/d38607c9774efe18ea4b8a2fd3fb9442534a8833">note on non-document services (issue #16)</a></li>
<li><a href="paia-b184081.html"><code>2013-04-10 10:47:29 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/b18408116711aa8ac50aa251241d910c0757dfa9">fixes wrong examples, closes #18</a></li>
<li><a href="paia-f31ab37.html"><code>2013-04-10 10:42:00 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/f31ab374b72e13e8e8d32b06f813a33be8c60ad6">introduced fee.feetype/feeid, closes #19</a></li>
<li><a href="paia-92c09ae.html"><code>2013-04-10 10:16:48 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/92c09ae5e050c83d4e832e5a5eb9788a734e330a">updated makespec</a></li>
<li><a href="paia-7c967d8.html"><code>2013-03-13 10:43:00 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/7c967d827292e774ea428caa67b49d55f963505e">started to tackle issue #15 and issue #16</a></li>
<li><a href="paia-d88e517.html"><code>2013-02-25 15:15:00 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/d88e517f79f6d8f1e7cadb1af6459f72c3a8f89f">more on the ontology</a></li>
<li><a href="paia-81aff20.html"><code>2013-02-22 15:03:17 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/81aff2046cb47bb1f785a6186c8f8c4ee070f5fe">correction on callback, closes #12</a></li>
<li><a href="paia-a429d4d.html"><code>2013-02-22 15:00:31 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/a429d4d50279dfecb407149c564e40696c96ef4f">added WWW-Authentificate header, closes #11</a></li>
<li><a href="paia-6e2111a.html"><code>2013-02-15 10:40:57 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/6e2111a9803d7df75316c12d667f96e810d7af54">clarified document return of renew and request</a></li>
<li><a href="paia-330e425.html"><code>2012-12-06 12:38:55 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/330e425e1132f87462b3a2e9d9273942b4121ac6">charset and HTTP verbs</a></li>
<li><a href="paia-a26c8d4.html"><code>2012-12-02 20:14:53 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/a26c8d4e26336f575fa4adaa65e51e761fe2540a">whitespace and namespaces</a></li>
<li><a href="paia-9670f7a.html"><code>2012-12-02 10:05:51 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/9670f7a892823d939af933f135bf600c83792c6a">started with PAIA ontology</a></li>
<li><a href="paia-d6564f0.html"><code>2012-11-30 10:41:22 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/d6564f01ae2600519ff4375b600475b10edcd274">change_password scope (issue #10)</a></li>
<li><a href="paia-060b5df.html"><code>2012-11-19 11:27:31 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/060b5dff61bd5bec9b1cda8015e6d5109f5411e9">make URL-encoded HTTP POST optional</a></li>
<li><a href="paia-ab9ed62.html"><code>2012-11-19 10:56:33 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/ab9ed626f8cac011c0b8f07cdbf2c0470bc613e0">Transitions of document states exemplified</a></li>
<li><a href="paia-39e7ddc.html"><code>2012-11-19 09:58:00 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/39e7ddc716492ad7c07f23307c7adda0388bec02">issue #5, #6, and #7</a></li>
<li><a href="paia-c748734.html"><code>2012-11-19 09:14:06 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/c748734bb6fc62fd1de2764c05a19b0b8613470c">full example</a></li>
<li><a href="paia-686358e.html"><code>2012-11-08 15:32:33 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/686358ef41cfbdc6b1b8c917780d15c4c2a31fc1">OAuth RFC included (RFC 6749 and RFC 6750)</a></li>
<li><a href="paia-6e802d9.html"><code>2012-11-08 15:10:40 +0100</code></a>: <a href="http://github.com/gbv/paia/commit/6e802d93820c97a26594879a2e39169125e76a90">scopes (issue #4)</a></li>
<li><a href="paia-47595cd.html"><code>2012-10-04 11:44:57 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/47595cdb9a153074f829244c9d25a5cd6c72b83a">simplified request format (solved issue #1 and part of #3)</a></li>
<li><a href="paia-4410969.html"><code>2012-10-04 10:42:15 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/441096952146ff49c3c7930adc947972e8b90325">more about error responses</a></li>
<li><a href="paia-77277cf.html"><code>2012-10-04 09:03:19 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/77277cf454a2736981cae94f34ea6c32b6742ee8">renamed PAIA auth methods (issue paia.md)</a></li>
<li><a href="paia-840b77c.html"><code>2012-09-04 13:32:48 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/840b77c46f6400da9c1c768e6e796bc86e0afe14">document as data type and solved issue #2</a></li>
<li><a href="paia-5c2005c.html"><code>2012-05-29 10:49:27 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/5c2005c8eefb8afdadffbf38358a1a3b7b9680be">added security considerations</a></li>
<li><a href="paia-868166f.html"><code>2012-05-28 09:20:39 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/868166f699ba58db97d8088818528d635205ed78">more on error codes</a></li>
<li><a href="paia-5145e3a.html"><code>2012-05-23 15:15:33 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/5145e3ae6e7a95d2327dcc59e5abd1a8684cc236">included all parameters and fields</a></li>
<li><a href="paia-4121ef7.html"><code>2012-05-23 12:40:46 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/4121ef7b3e4f6389fb05597fc159d9929ba84471">include git revision hash and date</a></li>
<li><a href="paia-bc46797.html"><code>2012-05-22 15:45:22 +0200</code></a>: <a href="http://github.com/gbv/paia/commit/bc4679735cefea8ff36324a2b168701ef609f3a3">inital, incomplete version</a></li>
</ul>
</section>
</section>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>The Simple Library Network Protocol (SLNP) and its variant XSLNP is an internal protocol of the the SISIS-Sunrise™ library system, providing access to patron information, among other functionality. OCLC does not allow publication of the specification or public use of SLNP.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>The error list was compiled from the HTTP and OAuth 2.0 specifications, <a href="https://dev.twitter.com/docs/error-codes-responses">the Twitter API</a>, <a href="https://api.stackexchange.com/docs/error-handling">the StackExchange API</a>, and <a href="http://developer.github.com/v3/#client-errors">the GitHub API</a>.<a href="#fnref2">↩</a></p></li>
</ol>
</section>
</body>
</html>
